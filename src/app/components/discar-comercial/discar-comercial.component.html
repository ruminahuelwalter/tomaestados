<div class="min-h-screen bg-sky-800 flex items-start justify-center p-4">
  <div class="w-full max-w-5xl bg-white rounded-2xl shadow-lg p-6 space-y-6">

    <!-- HEADER -->
    <div class="text-center">
      <h2 class="text-2xl font-semibold font-mono text-slate-800  ">
        CSV Discar a TXT
      </h2>
      <p class="text-lg text-slate-500 font-mono">
        Conversi√≥n de exportaci√≥n Discar a formato GLM
      </p>
    </div>

    <hr class="border-slate-200" />

    <!-- FILE -->
    <div class="flex flex-col gap-4 items-center">
      <button
        type="button"
        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition w-fit"
        (click)="fileInput.click()"
      >
        <!-- icon -->
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12v9M8 8l4-4 4 4"/>
        </svg>
        Seleccionar archivo
      </button>

      <input
        #fileInput
        type="file"
        accept=".txt,.csv"
        hidden
        (change)="onFileSelected($event)"
      />

      <p *ngIf="!previewData.length" class="text-slate-600 text-lg leading-relaxed max-w-3xl font-mono  text-center">
        Seleccion√° un archivo de exportaci√≥n de lectura de acumuladores (.CSV) de Discar.
        Se agregan los campos Medidor, KWh y Fecha, y se genera un TXT separado por tabulaciones listo
        para subir a GLM.
      </p>
    </div>

    <!-- ACTION BUTTONS -->
    <div *ngIf="previewData.length > 0"
         class="flex flex-wrap gap-3">
      <button
        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition"
        (click)="clearData()"
      >
        üóë Borrar datos
      </button>

      <button
        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 transition"
        (click)="generateTxt()"
      >
        ‚¨á Descargar TXT
      </button>
    </div>

    <!-- PREVIEW -->
    <div *ngIf="isData" class="space-y-3">
      <h5 class="text-sm font-medium text-slate-700">
        Previsualizaci√≥n (primeras {{ previewLimit }} filas)
      </h5>

      <div class="overflow-x-auto rounded-lg border border-slate-200">
        <table class="min-w-full text-sm">
          <thead class="bg-slate-100 text-slate-700">
            <tr>
              <th *ngFor="let col of visibleColumns"
                  class="px-3 py-2 text-left font-medium border-b">
                {{ col }}
              </th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let row of previewRows"
                class="odd:bg-white even:bg-slate-50">
              <td *ngFor="let col of visibleColumns"
                  class="px-3 py-2 border-b text-slate-700">
                {{ row[col] }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="pt-4 border-t border-slate-200 text-xs text-slate-500 flex justify-between font-mono">
      <span>WR60</span>
      <span>√öltima modificaci√≥n: 01/12/2025</span>
    </div>

  </div>
</div>
